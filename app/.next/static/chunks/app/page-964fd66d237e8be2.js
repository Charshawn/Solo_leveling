(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2839:function(e,s,t){Promise.resolve().then(t.bind(t,6339))},6339:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return eE}});var a=t(7437),l=t(2265),i=t(4508);let r=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let n=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle",l.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let d=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",l.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";var o=t(7053),m=t(7712);let x=(0,m.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=l.forwardRef(({className:e,variant:s,size:t,asChild:l=!1,...r},n)=>{let c=l?o.g7:"button";return(0,a.jsx)(c,{className:(0,i.cn)(x({variant:s,size:t,className:e})),ref:n,...r})});u.displayName="Button";var h=t(1239),g=t(8728);function f({user:e,onSettingsClick:s}){if(!e)return null;let t=e.attributes?.reduce((e,s)=>e+s.level,0)||0,l=e.sessions?.length||0;return(0,a.jsx)(r,{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-sm border-b border-gray-200",children:(0,a.jsx)(d,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[t," total levels • ",l," sessions"]})]})]}),s&&(0,a.jsx)(u,{variant:"ghost",size:"sm",onClick:s,className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})})})}var p=t(2369),j=t(1769),b=t(5954);function N({activeTab:e,onTabChange:s,className:t}){let l=[{id:"profile",label:"Profile",icon:p.Z,color:"text-blue-500"},{id:"skills",label:"Skills",icon:j.Z,color:"text-green-500"},{id:"timer",label:"Timer",icon:b.Z,color:"text-purple-500"}];return(0,a.jsx)("div",{className:(0,i.cn)("fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-50","safe-area-inset-bottom backdrop-blur-sm bg-white/95",t),children:(0,a.jsx)("div",{className:"flex justify-around max-w-md mx-auto",children:l.map(t=>{let l=t.icon,r=e===t.id;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:(0,i.cn)("flex flex-col items-center gap-1 py-2 px-3 rounded-lg transition-all duration-200","hover:bg-gray-100 min-w-[60px]",r&&"bg-gray-100"),children:[(0,a.jsx)(l,{className:(0,i.cn)("w-5 h-5 transition-colors",r?t.color:"text-gray-400")}),(0,a.jsx)("span",{className:(0,i.cn)("text-xs font-medium transition-colors",r?t.color:"text-gray-400"),children:t.label})]},t.id)})})})}let v=l.forwardRef(({className:e,type:s,...t},l)=>(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...t}));function y({value:e,max:s,className:t,showText:l=!0,color:r="primary",size:n="md",animated:c=!1}){return(0,a.jsxs)("div",{className:(0,i.cn)("relative",t),children:[(0,a.jsx)("div",{className:(0,i.cn)("w-full bg-gray-200 rounded-full overflow-hidden",{sm:"h-2",md:"h-3",lg:"h-4"}[n]),children:(0,a.jsx)("div",{className:(0,i.cn)("h-full transition-all duration-300 ease-out rounded-full",{primary:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",danger:"bg-red-500"}[r],c&&"animate-pulse"),style:{width:`${Math.min(100,Math.max(0,e/s*100))}%`}})}),l&&(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[(0,a.jsx)("span",{children:Math.round(e).toLocaleString()}),(0,a.jsx)("span",{children:Math.round(s).toLocaleString()})]})]})}v.displayName="Input";var w=t(6595),k=t(3327),S=t(8617);function T({level:e,tier:s,type:t,className:l}){if("attribute"===t&&e)return(0,a.jsxs)("div",{className:(0,i.cn)("inline-flex items-center gap-1 px-2 py-1 rounded-full text-sm font-medium",e>=10?"bg-purple-500 text-white":e>=5?"bg-blue-500 text-white":"bg-gray-500 text-white",l),children:[(0,a.jsx)(h.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["Lv. ",e]})]});if("skill"===t&&s){let{icon:e,color:t,label:r}={None:{icon:w.Z,color:"bg-gray-400 text-white",label:"Beginner"},Skill:{icon:k.Z,color:"bg-green-500 text-white",label:"Skill"},Expertise:{icon:w.Z,color:"bg-blue-500 text-white",label:"Expertise"},Mastery:{icon:S.Z,color:"bg-purple-500 text-white",label:"Mastery"}}[s];return(0,a.jsxs)("div",{className:(0,i.cn)("inline-flex items-center gap-1 px-2 py-1 rounded-full text-sm font-medium",t,l),children:[(0,a.jsx)(e,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:r})]})}return null}var C=t(8930);function R({attribute:e,onDelete:s,canDelete:t=!1,className:l}){let n=e.currentXp/e.xpToNextLevel*100;return(0,a.jsx)(r,{className:(0,i.cn)("relative overflow-hidden transition-all duration-200 hover:shadow-lg border-2","hover:border-blue-300 bg-gradient-to-br from-white to-blue-50",l),children:(0,a.jsxs)(d,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsx)(T,{level:e.level,type:"attribute"})]})]}),t&&s&&(0,a.jsx)("button",{onClick:()=>s(e.id),className:"text-red-400 hover:text-red-600 p-1 transition-colors",title:"Delete attribute",children:(0,a.jsx)(C.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"XP Progress"}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(e.currentXp).toLocaleString()," / ",Math.round(e.xpToNextLevel).toLocaleString()]})]}),(0,a.jsx)(y,{value:e.currentXp,max:e.xpToNextLevel,color:"primary",showText:!1,className:"mb-1"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[n.toFixed(1),"% to next level"]})]})]})})}var E=t(2207),A=t(9474),I=t(9397);function M({user:e,onCreateAttribute:s,onDeleteAttribute:t,onUpdateProfile:i}){let[o,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(e.name),j=()=>{o.trim()&&(s(o.trim()),m(""))},b=()=>{g.trim()!==e.name&&i({name:g.trim()}),h(!1)},N=e.sessions?.length||0,y=e.sessions?.reduce((e,s)=>e+s.focusMinutesTotal/60,0)||0,w=e.sessions?.reduce((e,s)=>e+s.totalXp,0)||0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(r,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:(0,a.jsx)(d,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"w-8 h-8"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:x?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{value:g,onChange:e=>f(e.target.value),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50",onKeyPress:e=>"Enter"===e.key&&b()}),(0,a.jsx)(u,{size:"sm",variant:"outline",className:"border-white/20 hover:bg-white/10",onClick:b,children:"Save"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:e.name}),(0,a.jsx)(u,{size:"sm",variant:"ghost",className:"text-white/80 hover:text-white hover:bg-white/10",onClick:()=>h(!0),children:(0,a.jsx)(E.Z,{className:"w-4 h-4"})})]})}),(0,a.jsx)("p",{className:"text-white/80",children:"Solo Leveling MVP"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)(r,{children:(0,a.jsxs)(d,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Sessions"})]})}),(0,a.jsx)(r,{children:(0,a.jsxs)(d,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y.toFixed(1)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Hours"})]})}),(0,a.jsx)(r,{children:(0,a.jsxs)(d,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:Math.round(w).toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total XP"})]})})]}),(0,a.jsxs)(r,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(c,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5"}),"Attributes"]})}),(0,a.jsxs)(d,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(v,{placeholder:"Create new attribute...",value:o,onChange:e=>m(e.target.value),onKeyPress:e=>"Enter"===e.key&&j(),className:"flex-1"}),(0,a.jsx)(u,{onClick:j,disabled:!o.trim(),children:(0,a.jsx)(I.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:e.attributes?.map(e=>a.jsx(R,{attribute:e,onDelete:t,canDelete:"strength"!==e.id&&"intelligence"!==e.id},e.id))}),e.attributes?.length===0&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(A.Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{children:"No attributes yet. Create your first attribute above!"})]})]})]}),(0,a.jsxs)(r,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(c,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5"}),"Achievements"]})}),(0,a.jsx)(d,{children:(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(A.Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{children:"Achievement system coming soon..."}),(0,a.jsx)("p",{className:"text-sm",children:"Keep training to unlock achievements!"})]})})]})]})}var _=t(6558),F=t(875),P=t(2135),B=t(401);let Z=_.fC;_.ZA;let X=_.B4,L=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(_.xz,{ref:l,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(_.JO,{asChild:!0,children:(0,a.jsx)(F.Z,{className:"h-4 w-4 opacity-50"})})]}));L.displayName=_.xz.displayName;let O=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(_.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(P.Z,{className:"h-4 w-4"})}));O.displayName=_.u_.displayName;let U=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(_.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})}));U.displayName=_.$G.displayName;let D=l.forwardRef(({className:e,children:s,position:t="popper",...l},r)=>(0,a.jsx)(_.h_,{children:(0,a.jsxs)(_.VY,{ref:r,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...l,children:[(0,a.jsx)(O,{}),(0,a.jsx)(_.l_,{className:(0,i.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(U,{})]})}));D.displayName=_.VY.displayName,l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(_.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=_.__.displayName;let z=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(_.ck,{ref:l,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(_.wU,{children:(0,a.jsx)(B.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(_.eT,{children:s})]}));z.displayName=_.ck.displayName,l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(_.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=_.Z0.displayName;var H=t(3145),$=t(1723),V=t(8896);class K{static{this.BASE_XP_PER_MINUTE=10}static{this.STREAK_BONUS_PER_HOUR=100}static{this.ACCELERATION_MULTIPLIER=1.5}static calculateSessionXP(e,s){let t=this.BASE_XP_PER_MINUTE*e,a=0,l=0,i=0;for(let e of s){let s=this.calculateSegmentBonus(e.minutes);a+=s.total,l+=s.streakBonus,i+=s.acceleratedBonus}return{baseXp:t,bonusXp:a,totalXp:t+a,breakdown:{baseFocusXp:t,streakBonusXp:l,acceleratedBonusXp:i}}}static calculateSegmentBonus(e){let s=Math.floor(e/60),t=e%60,a,l=0;if(a=0+Math.min(3,s)*this.STREAK_BONUS_PER_HOUR,s>3){let e=700;for(let t=4;t<=s;t++){let s=e*this.ACCELERATION_MULTIPLIER;l+=s-600,e=s}}if(t>0){let e=s+1,i=t/60;e<=3?a+=this.STREAK_BONUS_PER_HOUR*i:l+=((4===e?700:700*Math.pow(this.ACCELERATION_MULTIPLIER,e-4))*this.ACCELERATION_MULTIPLIER-600)*i}return{total:a+l,streakBonus:a,acceleratedBonus:l}}static getXpToNextLevel(e){return 700+700*Math.floor((e-1)/5)}static getLevelFromXp(e){let s=1,t=e;for(;t>0;){let e=this.getXpToNextLevel(s);if(t>=e)t-=e,s++;else break}let a=this.getXpToNextLevel(s)-t;return{level:s,currentXp:t,xpToNext:a}}}class G{static getSkillTier(e){return e>=1e3?"Mastery":e>=100?"Expertise":e>=20?"Skill":"None"}static getNextTierThreshold(e){return e<20?20:e<100?100:e<1e3?1e3:null}static getTierProgress(e){let s=this.getNextTierThreshold(e);if(!s)return null;let t=0;return 100===s&&(t=20),1e3===s&&(t=100),{current:e-t,target:s-t,percentage:(e-t)/(s-t)*100}}}function J({skill:e,attributes:s,onDelete:t,className:l}){let n=G.getTierProgress(e.totalHours),c=G.getNextTierThreshold(e.totalHours),o=s.filter(s=>e.attributeIds.includes(s.id));return(0,a.jsx)(r,{className:(0,i.cn)("relative overflow-hidden transition-all duration-200 hover:shadow-lg","hover:scale-[1.02] bg-gradient-to-br from-white to-gray-50",l),children:(0,a.jsxs)(d,{className:"p-0",children:[(0,a.jsxs)("div",{className:"relative h-32 bg-gray-200 overflow-hidden",children:[(0,a.jsx)(H.default,{src:e.imageUrl,alt:e.name,fill:!0,className:"object-cover",onError:e=>{e.target.style.display="none"}}),t&&(0,a.jsx)("button",{onClick:()=>t(e.id),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1.5 rounded-full transition-colors shadow-lg",title:"Delete skill",children:(0,a.jsx)(C.Z,{className:"w-3 h-3"})}),(0,a.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,a.jsx)(T,{tier:e.tier,type:"skill"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)($.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.totalHours.toFixed(1)," hours"]})]})]}),n&&c&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Next: ",c,"h"]}),(0,a.jsxs)("span",{className:"font-medium",children:[n.current.toFixed(1)," / ",n.target,"h"]})]}),(0,a.jsx)(y,{value:n.current,max:n.target,color:"success",showText:!1,size:"sm"})]}),o.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-1",children:[(0,a.jsx)(V.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Linked to:"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:o.map(e=>(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",children:e.name},e.id))})]})]})]})})}var Y=t(9027),q=t(2489);let W=Y.fC;Y.xz;let Q=Y.h_;Y.x8;let ee=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(Y.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));ee.displayName=Y.aV.displayName;let es=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(Q,{children:[(0,a.jsx)(ee,{}),(0,a.jsxs)(Y.VY,{ref:l,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(Y.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));es.displayName=Y.VY.displayName;let et=({className:e,...s})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});et.displayName="DialogHeader";let ea=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(Y.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));ea.displayName=Y.Dx.displayName,l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(Y.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s})).displayName=Y.dk.displayName;var el=t(6394);let ei=(0,m.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),er=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(el.f,{ref:t,className:(0,i.cn)(ei(),e),...s}));er.displayName=el.f.displayName;var en=t(9270);let ec=l.forwardRef(({className:e,...s},t)=>(0,a.jsx)(en.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,a.jsx)(en.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(B.Z,{className:"h-4 w-4"})})}));ec.displayName=en.fC.displayName;let ed={fitness:"https://cdn.abacus.ai/images/e7ad7ef8-0d5a-477d-97c5-84ca684e28a3.png",learning:"https://cdn.abacus.ai/images/9b2b9c39-0e21-4d32-82da-fdb9afd2d986.png",music:"https://cdn.abacus.ai/images/0ef35513-af3f-46ab-a7f1-2aa922fe3c3f.png",coding:"https://cdn.abacus.ai/images/ebd852b0-12dd-4b1d-b262-58d97efec0d2.png",art:"https://cdn.abacus.ai/images/32c9346b-aa46-4624-9cc2-358e9abe0ded.png",cooking:"https://cdn.abacus.ai/images/ebbcc7b7-6b13-47fa-8083-a3265446ce44.png",meditation:"https://cdn.abacus.ai/images/b0ed4704-c63e-4ae6-9149-673723c166cc.png",writing:"https://cdn.abacus.ai/images/a1816ae6-df6a-4d87-a106-118013d6b08e.png",sports:"https://cdn.abacus.ai/images/b0804bd4-9b8a-4d15-8e11-e1cc5f21aa3a.png",reading:"https://cdn.abacus.ai/images/9326b09c-b188-4b42-8925-6d51db11d403.png"};function eo({open:e,onClose:s,onCreateSkill:t,attributes:i}){let[r,n]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[o,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(""),[g,f]=(0,l.useState)(!1),p=e=>{m(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},j=r.trim()&&(c||g&&x.trim());return(0,a.jsx)(W,{open:e,onOpenChange:s,children:(0,a.jsxs)(es,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(et,{children:(0,a.jsx)(ea,{children:"Create New Skill"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(er,{htmlFor:"skill-name",children:"Skill Name"}),(0,a.jsx)(v,{id:"skill-name",placeholder:"e.g., Guitar Playing, Running, Coding",value:r,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(er,{children:"Choose Image"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ec,{id:"custom-image",checked:g,onCheckedChange:e=>f(!0===e)}),(0,a.jsx)(er,{htmlFor:"custom-image",className:"text-sm",children:"Use custom URL"})]})]}),g?(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{placeholder:"Enter image URL...",value:x,onChange:e=>h(e.target.value)}),x&&(0,a.jsx)("div",{className:"mt-3 relative h-24 w-24 mx-auto rounded-lg overflow-hidden",children:(0,a.jsx)(H.default,{src:x,alt:"Custom preview",fill:!0,className:"object-cover",onError:()=>h("")})})]}):(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-3",children:Object.entries(ed).map(([e,s])=>(0,a.jsx)("button",{onClick:()=>d(s),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition-all ${c===s?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300"}`,children:(0,a.jsx)(H.default,{src:s,alt:e,fill:!0,className:"object-cover"})},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(er,{className:"mb-3 block",children:"Link to Attributes (Optional)"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i?.map(e=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ec,{id:`attr-${e.id}`,checked:o.includes(e.id),onCheckedChange:()=>p(e.id)}),a.jsxs(er,{htmlFor:`attr-${e.id}`,className:"text-sm",children:[e.name," (Lv. ",e.level,")"]})]},e.id))||[]}),0===o.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Skills linked to attributes will award XP to those attributes during sessions."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(u,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(u,{onClick:()=>{if(!r.trim())return;let e=g&&x.trim()?x.trim():c||Object.values(ed)[0];t(r.trim(),e,o),n(""),d(""),m([]),h(""),f(!1)},disabled:!j,children:"Create Skill"})]})]})]})})}var em=t(3247),ex=t(740);function eu({skills:e,attributes:s,onCreateSkill:t,onDeleteSkill:i}){let[o,m]=(0,l.useState)(""),[x,h]=(0,l.useState)("all"),[g,f]=(0,l.useState)("all"),[p,b]=(0,l.useState)(!1),N=(0,l.useMemo)(()=>e.filter(e=>!!((!o||e.name.toLowerCase().includes(o.toLowerCase()))&&("all"===x||e.attributeIds.includes(x)))&&("all"===g||e.tier===g)),[e,o,x,g]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(c,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"}),"Skills (",e.length,")"]}),(0,a.jsxs)(u,{onClick:()=>b(!0),children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 mr-2"}),"Create Skill"]})]})}),(0,a.jsx)(d,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(em.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)(v,{placeholder:"Search skills...",value:o,onChange:e=>m(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(Z,{value:x,onValueChange:h,children:[(0,a.jsxs)(L,{className:"w-40",children:[(0,a.jsx)(ex.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)(X,{})]}),(0,a.jsxs)(D,{children:[(0,a.jsx)(z,{value:"all",children:"All Attributes"}),s.map(e=>(0,a.jsx)(z,{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)(Z,{value:g,onValueChange:f,children:[(0,a.jsx)(L,{className:"w-32",children:(0,a.jsx)(X,{})}),(0,a.jsxs)(D,{children:[(0,a.jsx)(z,{value:"all",children:"All Tiers"}),(0,a.jsx)(z,{value:"None",children:"Beginner"}),(0,a.jsx)(z,{value:"Skill",children:"Skill"}),(0,a.jsx)(z,{value:"Expertise",children:"Expertise"}),(0,a.jsx)(z,{value:"Mastery",children:"Mastery"})]})]})]})]})})]}),N.length>0?(0,a.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:N.map(e=>(0,a.jsx)(J,{skill:e,attributes:s,onDelete:i},e.id))}):(0,a.jsx)(r,{children:(0,a.jsx)(d,{className:"py-12",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(j.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),0===e.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No skills yet"}),(0,a.jsx)("p",{className:"mb-4",children:"Create your first skill to start tracking your progress!"}),(0,a.jsxs)(u,{onClick:()=>b(!0),children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 mr-2"}),"Create Your First Skill"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No skills match your filters"}),(0,a.jsx)("p",{children:"Try adjusting your search or filter criteria."})]})]})})}),(0,a.jsx)(eo,{open:p,onClose:()=>b(!1),onCreateSkill:(e,s,a)=>{t(e,s,a),b(!1)},attributes:s})]})}let eh={USER:"solo_leveling_user",SETTINGS:"solo_leveling_settings",TIMER_STATE:"solo_leveling_timer_state"};class eg{static saveUser(e){try{let s=JSON.stringify(e,(e,s)=>s instanceof Date?s.toISOString():s);localStorage.setItem(eh.USER,s)}catch(e){console.error("Failed to save user data:",e)}}static loadUser(){try{let e=localStorage.getItem(eh.USER);if(!e)return null;let s=JSON.parse(e);return{...s,createdAt:new Date(s.createdAt),attributes:s.attributes?.map(e=>({...e,createdAt:new Date(e.createdAt)}))??[],skills:s.skills?.map(e=>({...e,createdAt:new Date(e.createdAt)}))??[],sessions:s.sessions?.map(e=>({...e,startTime:new Date(e.startTime),endTime:new Date(e.endTime)}))??[]}}catch(e){return console.error("Failed to load user data:",e),null}}static saveSettings(e){try{localStorage.setItem(eh.SETTINGS,JSON.stringify(e))}catch(e){console.error("Failed to save settings:",e)}}static loadSettings(){try{let e=localStorage.getItem(eh.SETTINGS);if(!e)return{audioEnabled:!0,volume:.5};return JSON.parse(e)}catch(e){return console.error("Failed to load settings:",e),{audioEnabled:!0,volume:.5}}}static saveTimerState(e){try{let s=JSON.stringify(e,(e,s)=>s instanceof Date?s.toISOString():s);localStorage.setItem(eh.TIMER_STATE,s)}catch(e){console.error("Failed to save timer state:",e)}}static loadTimerState(){try{let e=localStorage.getItem(eh.TIMER_STATE);if(!e)return null;let s=JSON.parse(e);return s.sessionStartTime&&(s.sessionStartTime=new Date(s.sessionStartTime)),s}catch(e){return console.error("Failed to load timer state:",e),null}}static clearAll(){try{Object.values(eh).forEach(e=>{localStorage.removeItem(e)})}catch(e){console.error("Failed to clear storage:",e)}}static initializeDefaultUser(){let e={id:"default-user",name:"Solo Leveler",attributes:[{id:"strength",name:"Strength",level:1,currentXp:0,xpToNextLevel:700,createdAt:new Date},{id:"intelligence",name:"Intelligence",level:1,currentXp:0,xpToNextLevel:700,createdAt:new Date}],skills:[],sessions:[],createdAt:new Date};return this.saveUser(e),e}static isClient(){return"undefined"!=typeof localStorage}}class ef{static{this.FOCUS_DURATION=1500}static{this.SHORT_BREAK_DURATION=300}static{this.LONG_BREAK_DURATION=900}static{this.BREAK_OVERRUN_THRESHOLD=60}constructor(e){this.timer=null,this.callbacks={},this.state={isRunning:!1,isPaused:!1,phase:"focus",timeRemaining:ef.FOCUS_DURATION,focusBlocksCompleted:0,sessionStartTime:null,totalFocusMinutes:0,currentStreak:0,streakBroken:!1,selectedSkillId:void 0,selectedAttributeIds:[],...e},this.restoreState()}start(){this.state.isRunning||(this.state.isRunning=!0,this.state.isPaused=!1,this.state.sessionStartTime||(this.state.sessionStartTime=new Date),this.timer=setInterval(()=>{this.tick()},1e3),this.persistState())}pause(){this.state.isRunning&&(this.state.isRunning=!1,this.state.isPaused=!0,this.timer&&(clearInterval(this.timer),this.timer=null),this.state.phase,this.persistState())}stop(){if(!this.state.sessionStartTime)return null;let e=this.generateSession();return this.reset(),this.callbacks.onComplete&&this.callbacks.onComplete(e),e}skipBreak(){"focus"!==this.state.phase&&(this.state.phase="focus",this.state.timeRemaining=ef.FOCUS_DURATION,this.callbacks.onPhaseChange&&this.callbacks.onPhaseChange("focus"),this.persistState())}reset(){this.timer&&(clearInterval(this.timer),this.timer=null),this.state={isRunning:!1,isPaused:!1,phase:"focus",timeRemaining:ef.FOCUS_DURATION,focusBlocksCompleted:0,sessionStartTime:null,totalFocusMinutes:0,currentStreak:0,streakBroken:!1,selectedSkillId:void 0,selectedAttributeIds:[]},this.persistState()}setSelection(e,s=[]){this.state.selectedSkillId=e,this.state.selectedAttributeIds=s,this.persistState()}getState(){return{...this.state}}setCallbacks(e){this.callbacks={...e}}tick(){this.state.timeRemaining--,"focus"===this.state.phase&&(this.state.totalFocusMinutes=this.calculateTotalFocusMinutes(),this.state.currentStreak=this.state.totalFocusMinutes/60),this.state.timeRemaining<=0&&this.handlePhaseTransition(),this.callbacks.onTick&&this.callbacks.onTick({...this.state}),this.persistState()}handlePhaseTransition(){"focus"===this.state.phase?(this.state.focusBlocksCompleted++,this.state.focusBlocksCompleted%4==0?(this.state.phase="longBreak",this.state.timeRemaining=ef.LONG_BREAK_DURATION):(this.state.phase="shortBreak",this.state.timeRemaining=ef.SHORT_BREAK_DURATION)):(this.state.phase="focus",this.state.timeRemaining=ef.FOCUS_DURATION),this.callbacks.onPhaseChange&&this.callbacks.onPhaseChange(this.state.phase)}calculateTotalFocusMinutes(){if(!this.state.sessionStartTime)return 0;let e=ef.FOCUS_DURATION/60,s=this.state.focusBlocksCompleted*e;return"focus"===this.state.phase?s+(ef.FOCUS_DURATION-this.state.timeRemaining)/60:s}generateSession(){let e=new Date,s=this.calculateTotalFocusMinutes(),t=[{minutes:s,startTime:this.state.sessionStartTime,endTime:e}];return{id:`session_${Date.now()}`,startTime:this.state.sessionStartTime,endTime:e,focusMinutesTotal:s,completedFocusBlocks:this.state.focusBlocksCompleted,breaksUsed:{shortBreaks:0,longBreaks:0,overLimit:!1},streakSegments:t.map(e=>({minutes:e.minutes})),totalXp:0,attributeIdsAwardedTo:this.state.selectedAttributeIds,skillId:this.state.selectedSkillId}}persistState(){eg.isClient()&&eg.saveTimerState(this.state)}restoreState(){if(!eg.isClient())return;let e=eg.loadTimerState();e&&(this.state={...this.state,...e,isRunning:!1,isPaused:!1})}static formatTime(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}}var ep=t(1197),ej=t(5673);function eb({timerState:e}){let s=ef.formatTime(e.timeRemaining),t={focus:{icon:$.Z,label:"Focus Time",color:"text-white",bgColor:"bg-white/10"},shortBreak:{icon:ep.Z,label:"Short Break",color:"text-green-200",bgColor:"bg-green-500/20"},longBreak:{icon:ej.Z,label:"Long Break",color:"text-blue-200",bgColor:"bg-blue-500/20"}}[e.phase],l=t.icon;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full mb-4 ${t.bgColor}`,children:[(0,a.jsx)(l,{className:`w-5 h-5 ${t.color}`}),(0,a.jsx)("span",{className:`text-sm font-medium ${t.color}`,children:t.label})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-6xl md:text-7xl font-mono font-bold mb-2",children:s}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-4 text-white/80",children:[(0,a.jsxs)("div",{className:"text-sm",children:["Blocks: ",e.focusBlocksCompleted]}),(0,a.jsx)("div",{className:"w-1 h-1 bg-white/50 rounded-full"}),(0,a.jsxs)("div",{className:"text-sm",children:["Focus: ",e.totalFocusMinutes.toFixed(0),"m"]}),(0,a.jsx)("div",{className:"w-1 h-1 bg-white/50 rounded-full"}),(0,a.jsxs)("div",{className:"text-sm",children:["Streak: ",e.currentStreak.toFixed(1),"h"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 text-sm text-white/60",children:[e.isPaused&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-500/20 rounded",children:"Paused"}),e.streakBroken&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-500/20 rounded",children:"Streak Broken"}),e.isRunning&&(0,a.jsx)("span",{className:"px-2 py-1 bg-green-500/20 rounded animate-pulse",children:"Active"})]})]})}var eN=t(525);function ev({timerState:e,selectedSkill:s,selectedAttributes:t}){let i=(0,l.useMemo)(()=>{if(0===e.totalFocusMinutes)return null;let s=[{minutes:e.totalFocusMinutes,startTime:new Date,endTime:new Date}];return K.calculateSessionXP(e.totalFocusMinutes,s)},[e.totalFocusMinutes]),r=e.totalFocusMinutes/60;return(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,a.jsx)($.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Focus Time"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:[e.totalFocusMinutes.toFixed(0),"m"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 text-yellow-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"XP Earned"})]}),(0,a.jsx)("div",{className:"text-xl font-bold text-gray-900",children:i?Math.round(i.totalXp).toLocaleString():"0"})]}),s&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,a.jsx)(V.Z,{className:"w-4 h-4 text-green-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Skill Hours"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["+",r.toFixed(1),"h"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,a.jsx)(eN.Z,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Streak"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:[e.currentStreak.toFixed(1),"h"]})]}),i&&(0,a.jsx)("div",{className:"col-span-2 md:col-span-4 mt-4",children:(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"XP Breakdown"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Base XP:"}),(0,a.jsx)("div",{className:"font-medium",children:Math.round(i.breakdown.baseFocusXp)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Streak Bonus:"}),(0,a.jsx)("div",{className:"font-medium",children:Math.round(i.breakdown.streakBonusXp)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Acceleration:"}),(0,a.jsx)("div",{className:"font-medium",children:Math.round(i.breakdown.acceleratedBonusXp)})]})]})]})}),t.length>0&&(0,a.jsx)("div",{className:"col-span-2 md:col-span-4 mt-4",children:(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Awarding XP to:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded",children:[e.name," (Lv. ",e.level,")"]},e.id))})]})})]})}function ey({open:e,onClose:s,session:t,skill:l,attributes:i}){if(!t)return null;let n=t.focusMinutesTotal/60,c=t.streakSegments.map(e=>({minutes:e.minutes,startTime:t.startTime,endTime:t.endTime})),o=K.calculateSessionXP(t.focusMinutesTotal,c);return(0,a.jsx)(W,{open:e,onOpenChange:s,children:(0,a.jsxs)(es,{className:"max-w-md",children:[(0,a.jsx)(et,{children:(0,a.jsxs)(ea,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5 text-yellow-500"}),"Session Complete!"]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(r,{className:"bg-blue-50",children:(0,a.jsxs)(d,{className:"p-4 text-center",children:[(0,a.jsx)($.Z,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[t.focusMinutesTotal.toFixed(0),"m"]}),(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"Focus Time"})]})}),(0,a.jsx)(r,{className:"bg-yellow-50",children:(0,a.jsxs)(d,{className:"p-4 text-center",children:[(0,a.jsx)(h.Z,{className:"w-6 h-6 text-yellow-600 mx-auto mb-1"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-900",children:Math.round(t.totalXp).toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-yellow-600",children:"XP Earned"})]})})]}),l&&(0,a.jsx)(r,{className:"bg-green-50",children:(0,a.jsxs)(d,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(V.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"font-medium text-green-900",children:"Skill Progress"})]}),(0,a.jsxs)("div",{className:"text-sm text-green-800",children:[(0,a.jsx)("strong",{children:l.name}),": +",n.toFixed(1)," hours"]})]})}),i.length>0&&(0,a.jsx)(r,{className:"bg-purple-50",children:(0,a.jsxs)(d,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eN.Z,{className:"w-4 h-4 text-purple-600"}),(0,a.jsx)("span",{className:"font-medium text-purple-900",children:"XP Awarded To"})]}),(0,a.jsx)("div",{className:"space-y-1",children:i.map(e=>(0,a.jsxs)("div",{className:"text-sm text-purple-800",children:[(0,a.jsx)("strong",{children:e.name}),": +",Math.round(t.totalXp).toLocaleString()," XP"]},e.id))})]})}),(0,a.jsx)(r,{children:(0,a.jsxs)(d,{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"XP Breakdown"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Base XP (10/min):"}),(0,a.jsx)("span",{children:Math.round(o.breakdown.baseFocusXp)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Streak Bonus:"}),(0,a.jsx)("span",{children:Math.round(o.breakdown.streakBonusXp)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Acceleration Bonus:"}),(0,a.jsx)("span",{children:Math.round(o.breakdown.acceleratedBonusXp)})]}),(0,a.jsx)("hr",{className:"my-1"}),(0,a.jsxs)("div",{className:"flex justify-between font-medium text-gray-900",children:[(0,a.jsx)("span",{children:"Total XP:"}),(0,a.jsx)("span",{children:Math.round(t.totalXp)})]})]})]})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsxs)("div",{children:["Blocks Completed: ",t.completedFocusBlocks]}),(0,a.jsxs)("div",{children:["Session Duration: ",Math.round((t.endTime.getTime()-t.startTime.getTime())/6e4)," minutes"]})]}),(0,a.jsx)(u,{onClick:s,className:"w-full",children:"Continue Training"})]})]})})}var ew=t(3276),ek=t(9227),eS=t(1094),eT=t(1548);function eC({timerState:e,skills:s,attributes:t,onStartTimer:i,onPauseTimer:o,onStopTimer:m,onSkipBreak:x,onResetTimer:h,onSetSelection:g}){let[f,p]=(0,l.useState)("none"),[j,N]=(0,l.useState)([]),[v,y]=(0,l.useState)(null),[w,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g(f&&"none"!==f?f:void 0,j.length>0?j:t.map(e=>e.id))},[f,j,g,t]);let S=e=>{N(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},T=!e.isRunning,C=e.isRunning,R="focus"!==e.phase&&e.isRunning,E=null!==e.sessionStartTime;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(r,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:(0,a.jsxs)(d,{className:"p-6",children:[(0,a.jsx)(eb,{timerState:e}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[T&&(0,a.jsxs)(u,{size:"lg",onClick:()=>{if(!e.sessionStartTime&&0===j.length){let e=t.map(e=>e.id);N(e),g(f&&"none"!==f?f:void 0,e)}i()},className:"bg-white text-blue-600 hover:bg-blue-50 px-8",children:[(0,a.jsx)(ew.Z,{className:"w-5 h-5 mr-2"}),E?"Resume":"Start Session"]}),C&&(0,a.jsxs)(u,{size:"lg",variant:"outline",onClick:o,className:"border-white text-white hover:bg-white/10",children:[(0,a.jsx)(ek.Z,{className:"w-5 h-5 mr-2"}),"Pause"]}),E&&(0,a.jsxs)(u,{size:"lg",variant:"outline",onClick:()=>{let e=m();e&&(y(e),k(!0))},className:"border-white text-white hover:bg-white/10",children:[(0,a.jsx)(eS.Z,{className:"w-5 h-5 mr-2"}),"End Session"]}),R&&(0,a.jsxs)(u,{size:"lg",variant:"outline",onClick:x,className:"border-white text-white hover:bg-white/10",children:[(0,a.jsx)(eT.Z,{className:"w-5 h-5 mr-2"}),"Skip Break"]})]})]})}),!E&&(0,a.jsxs)(r,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(c,{className:"flex items-center gap-2",children:[(0,a.jsx)(V.Z,{className:"w-5 h-5"}),"Session Setup"]})}),(0,a.jsxs)(d,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Skill (Optional)"}),(0,a.jsxs)(Z,{value:f,onValueChange:p,children:[(0,a.jsx)(L,{children:(0,a.jsx)(X,{placeholder:"Choose a skill to train..."})}),(0,a.jsxs)(D,{children:[(0,a.jsx)(z,{value:"none",children:"No specific skill"}),s.map(e=>(0,a.jsxs)(z,{value:e.id,children:[e.name," (",e.totalHours.toFixed(1),"h)"]},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Award XP to Attributes"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,a.jsxs)(u,{variant:j.includes(e.id)?"default":"outline",onClick:()=>S(e.id),className:"justify-start",children:[(0,a.jsx)("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>{},className:"mr-2"}),e.name," (Lv. ",e.level,")"]},e.id))}),0===j.length&&(0,a.jsx)("p",{className:"text-sm text-amber-600 mt-1",children:"⚠️ No attributes selected. XP will be awarded to all attributes."})]})]})]}),E&&(0,a.jsxs)(r,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(c,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),"Session Progress"]})}),(0,a.jsx)(d,{children:(0,a.jsx)(ev,{timerState:e,selectedSkill:f&&"none"!==f?s.find(e=>e.id===f):void 0,selectedAttributes:t.filter(e=>j.includes(e.id))})})]}),(0,a.jsx)(r,{children:(0,a.jsx)(d,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Pomodoro Rules:"}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,a.jsx)("li",{children:"• Focus: 25 minutes of uninterrupted work"}),(0,a.jsx)("li",{children:"• Short Break: 5 minutes after each focus block"}),(0,a.jsx)("li",{children:"• Long Break: 15 minutes after every 4 focus blocks"}),(0,a.jsx)("li",{children:"• Streak continues if breaks stay within time limits"}),(0,a.jsx)("li",{children:"• XP multipliers kick in after 3+ consecutive hours"})]})]})})}),(0,a.jsx)(ey,{open:w,onClose:()=>k(!1),session:v,skill:f&&"none"!==f?s.find(e=>e.id===f):void 0,attributes:t.filter(e=>j.includes(e.id))})]})}var eR=t(1817);function eE(){let{user:e,activeTab:s,timerState:t,setActiveTab:i,createAttribute:r,deleteAttribute:n,createSkill:c,deleteSkill:d,updateProfile:o,startTimer:m,pauseTimer:x,stopTimer:u,skipBreak:h,resetTimer:g,setTimerSelection:p}=function(){let[e,s]=(0,l.useState)(null),[t,a]=(0,l.useState)("profile"),[i,r]=(0,l.useState)({audioEnabled:!0,volume:.5}),[n]=(0,l.useState)(()=>new ef),[c,d]=(0,l.useState)(n.getState());(0,l.useEffect)(()=>{if(!eg.isClient())return;let e=eg.loadUser();e||(e=eg.initializeDefaultUser()),s(e),r(eg.loadSettings()),n.setCallbacks({onTick:e=>d(e),onPhaseChange:e=>{console.log(`Phase changed to: ${e}`)},onComplete:e=>{o(e)}});let t=setInterval(()=>{d(n.getState())},1e3);return()=>clearInterval(t)},[n]),(0,l.useEffect)(()=>{e&&eg.isClient()&&eg.saveUser(e)},[e]),(0,l.useEffect)(()=>{eg.isClient()&&eg.saveSettings(i)},[i]);let o=(0,l.useCallback)(t=>{if(!e)return;let a=t.streakSegments.map(e=>({minutes:e.minutes,startTime:t.startTime,endTime:t.endTime})),l=K.calculateSessionXP(t.focusMinutesTotal,a);t.totalXp=l.totalXp;let i={...e};if(i.sessions=[...i.sessions,t],t.attributeIdsAwardedTo.forEach(e=>{let s=i.attributes.find(s=>s.id===e);if(s){let e=s.currentXp+s.level*s.xpToNextLevel+t.totalXp,a=K.getLevelFromXp(e);s.level=a.level,s.currentXp=a.currentXp,s.xpToNextLevel=a.xpToNext}}),t.skillId){let e=i.skills.find(e=>e.id===t.skillId);e&&(e.totalHours+=t.focusMinutesTotal/60,e.tier=G.getSkillTier(e.totalHours))}s(i),console.log("Session completed!",{focusMinutes:t.focusMinutesTotal.toFixed(1),xpEarned:t.totalXp,skillHours:t.skillId?(t.focusMinutesTotal/60).toFixed(1):0})},[e]),m=(0,l.useCallback)(t=>{if(!e)return;let a={id:`attr_${Date.now()}`,name:t,level:1,currentXp:0,xpToNextLevel:700,createdAt:new Date};s({...e,attributes:[...e.attributes,a]})},[e]),x=(0,l.useCallback)(t=>{e&&"strength"!==t&&"intelligence"!==t&&s({...e,attributes:e.attributes.filter(e=>e.id!==t),skills:e.skills.map(e=>({...e,attributeIds:e.attributeIds.filter(e=>e!==t)}))})},[e]),u=(0,l.useCallback)((t,a,l=[])=>{if(!e)return;let i={id:`skill_${Date.now()}`,name:t,imageUrl:a,attributeIds:l,totalHours:0,tier:"None",createdAt:new Date};s({...e,skills:[...e.skills,i]})},[e]),h=(0,l.useCallback)(t=>{e&&s({...e,skills:e.skills.filter(e=>e.id!==t)})},[e]),g=(0,l.useCallback)(t=>{e&&s({...e,...t})},[e]);return{user:e,activeTab:t,settings:i,timerState:c,setActiveTab:a,createAttribute:m,deleteAttribute:x,createSkill:u,deleteSkill:h,updateProfile:g,setSettings:r,startTimer:()=>n.start(),pauseTimer:()=>n.pause(),stopTimer:()=>n.stop(),skipBreak:()=>n.skipBreak(),resetTimer:()=>n.reset(),setTimerSelection:(e,s)=>n.setSelection(e,s)}}();return e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,a.jsx)(f,{user:e}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-6 max-w-6xl",children:["profile"===s&&(0,a.jsx)(M,{user:e,onCreateAttribute:r,onDeleteAttribute:n,onUpdateProfile:o}),"skills"===s&&(0,a.jsx)(eu,{skills:e.skills||[],attributes:e.attributes||[],onCreateSkill:c,onDeleteSkill:d}),"timer"===s&&(0,a.jsx)(eC,{timerState:t,skills:e.skills||[],attributes:e.attributes||[],onStartTimer:m,onPauseTimer:x,onStopTimer:u,onSkipBreak:h,onResetTimer:g,onSetSelection:p})]}),(0,a.jsx)(N,{activeTab:s,onTabChange:i})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(eR.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-500"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading Solo Leveling..."})]})})}},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return i}});var a=t(1994),l=t(3335);function i(...e){return(0,l.m6)((0,a.W)(e))}}},function(e){e.O(0,[399,369,971,117,744],function(){return e(e.s=2839)}),_N_E=e.O()}]);